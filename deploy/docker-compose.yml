version: "3.7"
services:
  trec-service:
    build:
      context: ../trec-service
    ports:
      - "8001:8001"
    depends_on:
      - elasticsearch
  elasticsearch:
    image: elasticsearch:7.10.1
    environment:
      discovery.type: single-node
      threadpool.index.size: 50
      ES_HEAP_SIZE: 30g
    ports:
      - "9200:9200"
    volumes:
      - /storage/jrie/es:/usr/share/elasticsearch/data
    container_name: elasticsearch
